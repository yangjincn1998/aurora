Traceback (most recent call last):
  File "/Users/jin.yang/PycharmProjects/aurora/test_openai_sdk_fixed.py", line 76, in <module>
    response = client.chat.completions.create(
        model="google/gemini-2.5-pro",
    ...<3 lines>...
        response_format={"type": "json_object"},
    )
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_utils/_utils.py", line 286, in wrapper
    return func(*args, **kwargs)
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py", line 1147, in create
    return self._post(
           ~~~~~~~~~~^
        "/chat/completions",
        ^^^^^^^^^^^^^^^^^^^^
    ...<46 lines>...
        stream_cls=Stream[ChatCompletionChunk],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1052, in request
    return self._process_response(
           ~~~~~~~~~~~~~~~~~~~~~~^
        cast_to=cast_to,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        retries_taken=retries_taken,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_base_client.py", line 1141, in _process_response
    return api_response.parse()
           ~~~~~~~~~~~~~~~~~~^^
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_response.py", line 323, in parse
    parsed = self._parse(to=to)
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/openai/_response.py", line 265, in _parse
    data = response.json()
  File "/Users/jin.yang/PycharmProjects/aurora/.venv/lib/python3.13/site-packages/httpx/_models.py", line 832, in json
    return jsonlib.loads(self.content, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 344, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 362, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 341 column 1 (char 1870)
Total subtitle blocks: 1598
Testing with FULL subtitle (no slicing)
Full subtitle size: 67491 chars

System prompt length: 1553 chars
User query length: 67943 chars

============================================================
Method 1: Using custom httpx client with OpenAI SDK
============================================================

Error: JSONDecodeError: Expecting value: line 341 column 1 (char 1870)
